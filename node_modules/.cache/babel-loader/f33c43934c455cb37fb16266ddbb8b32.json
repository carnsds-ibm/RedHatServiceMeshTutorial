{"ast":null,"code":"import React from\"react\";import{Content}from\"carbon-components-react/lib/components/UIShell\";import Header from\"../header/BasicHeader\";import{UnorderedList,ListItem}from\"carbon-components-react\";import BodyText from\"../text/BodyText\";import CodeSnip from\"../util/CustomCodeSnip\";import Image from'../util/Image';// == ASSETTS ==\nimport IMG1 from'../../assets/pg8-1.png';var EighthPage=function EighthPage(){return/*#__PURE__*/React.createElement(Content,null,/*#__PURE__*/React.createElement(Header,{text:\"Egress\"}),/*#__PURE__*/React.createElement(UnorderedList,null,/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(BodyText,{text:\"Purpose\"}),/*#__PURE__*/React.createElement(BodyText,{SM:true,text:\"This section will try to show you how to setup egress properly. Such that, if your application required external resources like a database or a third-party API, \\n          you could restrict your mesh to only be able to communicate with those. So, this section will be sort of short, we're just gonna make two resources to show how to add and configure an external resource. \\n          We will be making use of a ServiceEntry and a VirtualService to show how to set it up and configure a timeout on said resource.\"}),/*#__PURE__*/React.createElement(BodyText,{SM:true,B:true,text:\"Please ensure you have your APP_PROJ environment variable set and are logged into the oc CLI.\"}),/*#__PURE__*/React.createElement(BodyText,{SM:true,text:\"Then please switch to your <initials>-application project with the CLI.\"}),/*#__PURE__*/React.createElement(CodeSnip,{text:\"oc project $APP_PROJ\"})),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(BodyText,{text:\"Making the ServiceEntry\"}),/*#__PURE__*/React.createElement(BodyText,{SM:true,text:\"Copy and run the following command.\"}),/*#__PURE__*/React.createElement(CodeSnip,{M:true,text:\"cat << EOF > service_entry.yaml\\napiVersion: networking.istio.io/v1alpha3\\nkind: ServiceEntry\\nmetadata:\\n  name: redhat\\nspec:\\n  hosts:\\n  - www.redhat.com\\n  ports:\\n  - number: 443\\n    name: https\\n    protocol: HTTPS\\n  resolution: DNS\\n  location: MESH_EXTERNAL\\nEOF\\noc apply -f service_entry.yaml\"}),/*#__PURE__*/React.createElement(BodyText,{SM:true,text:\"The above line created the ServiceEntry for secure https access to www.redhat.com. Notice we told the mesh it was external with the \\n        'MESH_EXTERNAL' location value. We can test that this is tracked by the sidecar with a simple curl command from our pod running our backend application. Run the following \\n        command to to run a curl command from in the backend pod. The response should just indicate a successful request with a 200 response code.\"}),/*#__PURE__*/React.createElement(CodeSnip,{text:\"oc exec -it $(oc get pod -l app=backend-deploy,version=v1 -o jsonpath={.items..metadata.name}) -c void-backend -- curl -I https://www.redhat.com/en | grep \\\"HTTP/\\\"\"}),/*#__PURE__*/React.createElement(Image,{path:IMG1,text:\"Successful curl from inside pod\"})),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(BodyText,{text:\"Setting an Egress Rule with a VirtualService\"}),/*#__PURE__*/React.createElement(BodyText,{SM:true,text:\"Now that we know our pod can hit that external service, we can set some rules for it to follow in the future. \"}),/*#__PURE__*/React.createElement(CodeSnip,{M:true,text:\"cat << EOF > virtual_service_egress.yaml\\napiVersion: networking.istio.io/v1alpha3\\nkind: VirtualService\\nmetadata:\\n  name: redhat-ext\\nspec:\\n  hosts:\\n    - redhat.com\\n  http:\\n  - timeout: 3s\\n    route:\\n      - destination:\\n          host: redhat.com\\nEOF\\noc apply -f virtual_service_egress.yaml\"}),/*#__PURE__*/React.createElement(BodyText,{SM:true,text:\"This exmplifies that VirtualServices can also apply to external sources. This simple one just limits timeouts to 3 seconds. This is just an example,\\n            maybe in the future we'll go more in depth into egress sources. Also note by default, the ServiceMesh allows your pods to hit any external sources you'd like. It would require some istio \\n            configuration editing to change that. Which maybe, if requested could be something we could delve into deeper in the future.\"})),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(BodyText,{text:\"Summary\"}),/*#__PURE__*/React.createElement(BodyText,{SM:true,text:\"This was just a nice simple view into how you would go about adding an external service using a ServiceEntry istio resource. This just allows \\n          the user to specify an allowed resource for your internal services to use. You can change it so it can manipulate you to do allow access to a set of domains and more. I encourage to read up \\n          on egress specific istio stuff by following the link below if you're so interested. We also create another VirtualService that allows us to set some rules regarding our external resource. \\n          Here we set a simple timeout limit, but you could theoretically disallow or allow a plethera of rule that you'd like. Our example application doesn't really require external sources, so it \\n          seemed a bit of scope for this tutorial.\"}),/*#__PURE__*/React.createElement(UnorderedList,{nested:true},/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(\"a\",{rel:\"noopener noreferrer\",href:'https://istio.io/docs/tasks/traffic-management/egress/',target:\"_blank\"},\"Link for isitio egress information.\"))))));};export default EighthPage;","map":{"version":3,"sources":["/Users/dilloncarns/Projects/redhatservicemeshtutorial/src/components/pages/EighthPage.js"],"names":["React","Content","Header","UnorderedList","ListItem","BodyText","CodeSnip","Image","IMG1","EighthPage"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,OAAT,KAAwB,gDAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,uBAAnB,CACA,OAASC,aAAT,CAAwBC,QAAxB,KAAwC,yBAAxC,CACA,MAAOC,CAAAA,QAAP,KAAqB,kBAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CAEA;AACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,sBACjB,oBAAC,OAAD,mBACI,oBAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,EADJ,cAEI,oBAAC,aAAD,mBACE,oBAAC,QAAD,mBACE,oBAAC,QAAD,EAAU,IAAI,CAAC,SAAf,EADF,cAEE,oBAAC,QAAD,EAAU,EAAE,KAAZ,CAAa,IAAI,sgBAAjB,EAFF,cAKE,oBAAC,QAAD,EAAU,EAAE,KAAZ,CAAa,CAAC,KAAd,CAAe,IAAI,gGAAnB,EALF,cAME,oBAAC,QAAD,EAAU,EAAE,KAAZ,CAAa,IAAI,CAAC,yEAAlB,EANF,cAOE,oBAAC,QAAD,EAAU,IAAI,CAAC,sBAAf,EAPF,CADF,cAUE,oBAAC,QAAD,mBACE,oBAAC,QAAD,EAAU,IAAI,CAAC,yBAAf,EADF,cAEE,oBAAC,QAAD,EAAU,EAAE,KAAZ,CAAa,IAAI,sCAAjB,EAFF,cAGE,oBAAC,QAAD,EAAU,CAAC,KAAX,CAAY,IAAI,oTAAhB,EAHF,cAoBA,oBAAC,QAAD,EAAU,EAAE,KAAZ,CAAa,IAAI,gdAAjB,EApBA,cAuBA,oBAAC,QAAD,EAAU,IAAI,uKAAd,EAvBA,cAwBA,oBAAC,KAAD,EAAO,IAAI,CAAED,IAAb,CAAmB,IAAI,CAAC,iCAAxB,EAxBA,CAVF,cAoCE,oBAAC,QAAD,mBACI,oBAAC,QAAD,EAAU,IAAI,CAAC,8CAAf,EADJ,cAEI,oBAAC,QAAD,EAAU,EAAE,KAAZ,CAAa,IAAI,iHAAjB,EAFJ,cAGI,oBAAC,QAAD,EAAU,CAAC,KAAX,CAAY,IAAI,mTAAhB,EAHJ,cAmBI,oBAAC,QAAD,EAAU,EAAE,KAAZ,CAAa,IAAI,0eAAjB,EAnBJ,CApCF,cA2DE,oBAAC,QAAD,mBACE,oBAAC,QAAD,EAAU,IAAI,CAAC,SAAf,EADF,cAEE,oBAAC,QAAD,EAAU,EAAE,KAAZ,CAAa,IAAI,gyBAAjB,EAFF,cAOE,oBAAC,aAAD,EAAe,MAAM,KAArB,eACE,oBAAC,QAAD,mBAAU,yBAAG,GAAG,CAAC,qBAAP,CAA6B,IAAI,CAAE,wDAAnC,CAA6F,MAAM,CAAC,QAApG,wCAAV,CADF,CAPF,CA3DF,CAFJ,CADiB,EAAnB,CA4EA,cAAeC,CAAAA,UAAf","sourcesContent":["import React from \"react\";\n\nimport { Content } from \"carbon-components-react/lib/components/UIShell\";\nimport Header from \"../header/BasicHeader\";\nimport { UnorderedList, ListItem } from \"carbon-components-react\";\nimport BodyText from \"../text/BodyText\";\nimport CodeSnip from \"../util/CustomCodeSnip\";\nimport Image from '../util/Image';\n\n// == ASSETTS ==\nimport IMG1 from '../../assets/pg8-1.png';\n\nconst EighthPage = () => (\n  <Content>\n      <Header text=\"Egress\"/>\n      <UnorderedList>\n        <ListItem>\n          <BodyText text=\"Purpose\" />\n          <BodyText SM text={`This section will try to show you how to setup egress properly. Such that, if your application required external resources like a database or a third-party API, \n          you could restrict your mesh to only be able to communicate with those. So, this section will be sort of short, we're just gonna make two resources to show how to add and configure an external resource. \n          We will be making use of a ServiceEntry and a VirtualService to show how to set it up and configure a timeout on said resource.`} />\n          <BodyText SM B text={`Please ensure you have your APP_PROJ environment variable set and are logged into the oc CLI.`} />\n          <BodyText SM text=\"Then please switch to your <initials>-application project with the CLI.\" />\n          <CodeSnip text=\"oc project $APP_PROJ\" />\n        </ListItem>\n        <ListItem>\n          <BodyText text=\"Making the ServiceEntry\" />\n          <BodyText SM text={`Copy and run the following command.`} />\n          <CodeSnip M text={\n`cat << EOF > service_entry.yaml\napiVersion: networking.istio.io/v1alpha3\nkind: ServiceEntry\nmetadata:\n  name: redhat\nspec:\n  hosts:\n  - www.redhat.com\n  ports:\n  - number: 443\n    name: https\n    protocol: HTTPS\n  resolution: DNS\n  location: MESH_EXTERNAL\nEOF\noc apply -f service_entry.yaml`} />\n        <BodyText SM text={`The above line created the ServiceEntry for secure https access to www.redhat.com. Notice we told the mesh it was external with the \n        'MESH_EXTERNAL' location value. We can test that this is tracked by the sidecar with a simple curl command from our pod running our backend application. Run the following \n        command to to run a curl command from in the backend pod. The response should just indicate a successful request with a 200 response code.`} />\n        <CodeSnip text={`oc exec -it $(oc get pod -l app=backend-deploy,version=v1 -o jsonpath={.items..metadata.name}) -c void-backend -- curl -I https://www.redhat.com/en | grep \"HTTP/\"`} />\n        <Image path={IMG1} text=\"Successful curl from inside pod\" />\n        </ListItem>\n        <ListItem>\n            <BodyText text=\"Setting an Egress Rule with a VirtualService\" />\n            <BodyText SM text={`Now that we know our pod can hit that external service, we can set some rules for it to follow in the future. `} />\n            <CodeSnip M text={\n`cat << EOF > virtual_service_egress.yaml\napiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n  name: redhat-ext\nspec:\n  hosts:\n    - redhat.com\n  http:\n  - timeout: 3s\n    route:\n      - destination:\n          host: redhat.com\nEOF\noc apply -f virtual_service_egress.yaml`} />\n            <BodyText SM text={`This exmplifies that VirtualServices can also apply to external sources. This simple one just limits timeouts to 3 seconds. This is just an example,\n            maybe in the future we'll go more in depth into egress sources. Also note by default, the ServiceMesh allows your pods to hit any external sources you'd like. It would require some istio \n            configuration editing to change that. Which maybe, if requested could be something we could delve into deeper in the future.`} />\n        </ListItem>\n        <ListItem>\n          <BodyText text=\"Summary\" />\n          <BodyText SM text={`This was just a nice simple view into how you would go about adding an external service using a ServiceEntry istio resource. This just allows \n          the user to specify an allowed resource for your internal services to use. You can change it so it can manipulate you to do allow access to a set of domains and more. I encourage to read up \n          on egress specific istio stuff by following the link below if you're so interested. We also create another VirtualService that allows us to set some rules regarding our external resource. \n          Here we set a simple timeout limit, but you could theoretically disallow or allow a plethera of rule that you'd like. Our example application doesn't really require external sources, so it \n          seemed a bit of scope for this tutorial.`} />\n          <UnorderedList nested>\n            <ListItem><a rel=\"noopener noreferrer\" href={'https://istio.io/docs/tasks/traffic-management/egress/'} target='_blank'>Link for isitio egress information.</a></ListItem>\n          </UnorderedList>\n        </ListItem>\n      </UnorderedList>\n  </Content>\n);\nexport default EighthPage;\n"]},"metadata":{},"sourceType":"module"}